<!DOCTYPE html>
<html>
  <head>
    <title> Twittler </title>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>

  <link rel="stylesheet" href="style.css">
  </head>
  <body>

    <script>

      var displayUser = function(user){
        clearStuff();

        var index = streams.users[user].length -1
        while(index >= 0){
          var allTweets = streams.users[user];
          var tweet = allTweets[index];
          var $tweet = $('<div class="messagebox"></div>');
          $tweet.html('@' + '<button class=userlink><b>' + tweet.user +'</b></button>' + ':  ' + tweet.message  + '<br><br/>' + '<em>' + 'Tweeted at ' + tweet.created_at + '</em>');
          $tweet.appendTo('.container');
          index -= 1;

        }
        clickbind();
      }

      var clickbind = function(){
        $('.userlink').on('click', function(){
          clearStuff();
          displayUser($(this).children().text());
        });
      };

      var clearStuff = function(){
        $('.messagebox').remove()
      };

      var displayAll = function(){
        console.log('display all runs')
        //var $body = $('body');
        //$body.html(''); //Why is this even here. Come on.
        var index = streams.home.length - 1;
        while(index >= 0){
          var tweet = streams.home[index];
          var $tweet = $('<div class="messagebox"></div>');
          $tweet.html('@' + '<button class=userlink><b>' + tweet.user +'</b></button>' + ': ' + tweet.message  + '<br><br/>' + '<em>' + 'Tweeted at ' + tweet.created_at + '</em>');
          $tweet.appendTo('.container');
          index -= 1;
        }

        clickbind();
      }

      $(document).ready(function(){
        displayAll();

        $('.shovel').click(function(){
          clearStuff();
          displayAll();

        });
      });

    </script>

    <h1> Twittler </h1>
    <h3> A littler twitter </h3>
    <h5><em> for all your copyright infringment needs </em></h5>
    <button class="shovel">Shovel More Twits At Me!</button>
    <br></br>
    <div class='container'>

    </div>

  </body>
</html>
