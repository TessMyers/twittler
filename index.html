<!DOCTYPE html>
<html>
  <head>
    <title> Twittler </title>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>

  <link rel="stylesheet" href="style.css">
  </head>
  <body>

    <script>

    // build a buildTweet function, abstract. smoosh together display functions. have a party.

      var displayUser = function(user){
        clearStuff();

        var index = streams.users[user].length -1
        while(index >= 0){
          var allTweets = streams.users[user];
          var tweet = allTweets[index];
          var $tweet = $('<div class="messagebox"></div>');
          var date = tweet.created_at.toDateString();
          $tweet.html('@' + '<button class=userlink><b>' + tweet.user +'</b></button>' + ': ' + tweet.message  + '<br><br/>' + '<em>' + 'Tweeted at ' + date + '</em>');
          $tweet.appendTo('.container');
          index -= 1;

        }
      }

      var clearStuff = function(){
        $('.messagebox').remove()
      };

      var displayAll = function(){
        console.log('display all runs')
        //var $body = $('body');
        //$body.html(''); //Why is this even here. Come on.
        var index = streams.home.length - 1;
        while(index >= 0){
          var tweet = streams.home[index];
          var $tweet = $('<div class="messagebox"></div>');
          var date = tweet.created_at.toDateString();
          $tweet.html('@' + '<button class=userlink><b>' + tweet.user +'</b></button>' + ': ' + tweet.message  + '<br><br/>' + '<em>' + 'Tweeted at ' + date + '</em>');
          $tweet.appendTo('.container');
          index -= 1;
        }
      }

      $(document).ready(function(){
        displayAll();

        $('.shovel').click(function(){
          clearStuff();
          displayAll();
        });

        $('.container').on('click', '.userlink', function(){
          clearStuff();
          displayUser($(this).children().text());
        });
      });

    </script>

    <h1> Twittler </h1>
    <h3> A littler twitter </h3>
    <h5><em> for all your copyright infringment needs </em></h5>
    <button class="shovel">Shovel More Twits At Me!</button>
    <br></br>
    <div class='container'>

    </div>

  </body>
</html>
